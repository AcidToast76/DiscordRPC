"use strict";var clientId="1254145695762485248",DiscordRPC=require("discord-rpc"),RPC=new DiscordRPC.Client({transport:"ipc"});function spotifyrpc(e){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://spotify.thefemdevs.com/playing/nezha").then(function(e){return e.json()}));case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}})}function setActivity(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(RPC){e.next=2;break}return e.abrupt("return");case 2:RPC.setActivity({details:"Playing a game",state:"In the menu",largeImageKey:"large",largeImageText:"Large Image",smallImageKey:"small",smallImageText:"Small Image",instance:!1,buttons:[{label:"Website",url:"https://nezha.thefemdevs.com"},{label:"Spotify",url:"https://open.spotify.com/user/hpjv09y99ucx7adf3jb6qijvp?si=40ac1fa71e7d44ee"}]});case 3:case"end":return e.stop()}})}function setSpotifyRPC(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(RPC){e.next=2;break}return e.abrupt("return");case 2:RPC.setActivity({details:"Listening to Spotify",state:"Warframe Bops",largeImageKey:"large",largeImageText:"Large Image",smallImageKey:"small",smallImageText:"Small Image",instance:!1,buttons:[{label:"Website",url:"https://nezha.thefemdevs.com"},{label:"Spotify",url:"https://open.spotify.com/user/hpjv09y99ucx7adf3jb6qijvp?si=40ac1fa71e7d44ee"}]});case 3:case"end":return e.stop()}})}function fetchCurrentlyPlayingTrack(){var t,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://spotify.thefemdevs.com/playing/nezha",{}));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Failed to fetch currently playing track");case 5:return e.next=7,regeneratorRuntime.awrap(t.json());case 7:return r=e.sent,e.abrupt("return",{trackName:r.item.name,artistName:r.item.artists.map(function(e){return e.name}).join(", "),trackUrl:r.item.external_urls.spotify});case 9:case"end":return e.stop()}})}function updateDiscordRPCWithSpotify(){var t,r,n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(fetchCurrentlyPlayingTrack(accessToken));case 3:t=e.sent,r=t.trackName,n=t.artistName,a=t.trackUrl,RPC.setActivity({details:"Listening to ".concat(r),state:"by ".concat(n),largeImageKey:"spotify",buttons:[{label:"Listen on Spotify",url:a}]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Failed to update Discord RPC with Spotify:",e.t0);case 13:case"end":return e.stop()}},null,null,[[0,10]])}DiscordRPC.register(clientId),spotifyrpc(),RPC.on("ready",function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:setActivity(),setInterval(function(){setActivity()},15e3);case 2:case"end":return e.stop()}})}),RPC.on("ready",function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:updateDiscordRPCWithSpotify(),setInterval(updateDiscordRPCWithSpotify,15e3);case 2:case"end":return e.stop()}})}),RPC.login({clientId:clientId}).catch(function(e){return console.error(e)}),setSpotifyRPC();
//# sourceMappingURL=app.min.js.map
