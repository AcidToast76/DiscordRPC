{"version":3,"sources":["app.js"],"names":["clientId","DiscordRPC","require","Client","transport","setActivity","fetch","then","res","json","spotifyRPC","register","RPC","song","title","name","artists","album","url","state","details"," by "," on ","largeImageKey","largeImageText","smallImageKey","smallImageText","instance","buttons","console","label","Error","trackName","data","item","artistName","map","artist","join","trackUrl","external_urls","spotify","updateDiscordRPCWithSpotify","_ref","regeneratorRuntime","async","_context4","prev","next","awrap","fetchCurrentlyPlayingTrack","accessToken","sent","concat","t0","error","stop","setInterval","on","_context5","login","err"],"mappings":"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","file":"app.min.js","sourcesContent":["const clientId = \"1254145695762485248\";\r\nconst DiscordRPC = require(\"discord-rpc\");\r\nconst RPC = new DiscordRPC.Client({ transport: \"ipc\" });\r\n\r\n\r\nDiscordRPC.register(clientId);\r\n\r\nasync function setActivity() {\r\n    let spotifyRPC = await fetch(\"https://spotify.thefemdevs.com/playing/nezha\").then(res => res.json());\r\n    console.dir(spotifyRPC);\r\n    if (!RPC) {\r\n        return;\r\n    }\r\n    const { name: title, artists, album, url } = spotifyRPC.song\r\n    \r\n    RPC.setActivity({\r\n        state: \"Listening To:\",\r\n        details: title, \" by \": artists, \" on \": album,\r\n        largeImageKey: \"large\",\r\n        largeImageText: \"Large Image\",\r\n        smallImageKey: \"small\",\r\n        smallImageText: \"Small Image\",\r\n        instance: false,\r\n        buttons: [\r\n            { \r\n                label: \"Website\", url: \"https://nezha.thefemdevs.com\" \r\n            },\r\n            { \r\n                label: \"Spotify\", url: \"https://open.spotify.com/user/hpjv09y99ucx7adf3jb6qijvp?si=40ac1fa71e7d44ee\" \r\n            },\r\n            {\r\n                label: \"Song\", url: url\r\n            }\r\n        ]\r\n    });\r\n}\r\n\r\nRPC.on(\"ready\", async () => {\r\n    setActivity();\r\n    setInterval(() => {\r\n        setActivity();\r\n    }, 15e3);\r\n});\r\n\r\n\r\n// Function to fetch the currently playing track from Spotify\r\nasync function fetchCurrentlyPlayingTrack() {\r\n    const response = await fetch(\"https://spotify.thefemdevs.com/playing/nezha\", {\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error(\"Failed to fetch currently playing track\");\r\n    }\r\n\r\n    const data = await response.json();\r\n    return {\r\n        trackName: data.item.name,\r\n        artistName: data.item.artists.map(artist => artist.name).join(\", \"),\r\n        trackUrl: data.item.external_urls.spotify,\r\n    };\r\n}\r\n\r\n// Function to update Discord RPC with Spotify track information\r\nasync function updateDiscordRPCWithSpotify() {\r\n    try {\r\n        const { trackName, artistName, trackUrl } = await fetchCurrentlyPlayingTrack(accessToken);\r\n\r\n        RPC.setActivity({\r\n            details: `Listening to ${trackName}`,\r\n            state: `by ${artistName}`,\r\n            largeImageKey: \"spotify\",\r\n            buttons: [{ label: \"Listen on Spotify\", url: trackUrl }]\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Failed to update Discord RPC with Spotify:\", error);\r\n    }\r\n}\r\n\r\n// Example usage\r\nRPC.on(\"ready\", async () => {\r\n    updateDiscordRPCWithSpotify();\r\n    setInterval(updateDiscordRPCWithSpotify, 15e3); // Update every 15 seconds\r\n});\r\n\r\nRPC.login({ clientId }).catch(err => console.error(err));\r\n\r\nsetActivity();"]}